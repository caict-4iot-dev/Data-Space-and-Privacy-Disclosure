{"architecture":"amd64","config":{"ExposedPorts":{"3306/tcp":{},"33060/tcp":{},"3307/tcp":{}},"Env":["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","GOSU_VERSION=1.16","MYSQL_MAJOR=5.7","MYSQL_VERSION=5.7.44-1.el7","MYSQL_SHELL_VERSION=8.0.35-1.el7","MYSQL_ROOT_PASSWORD=root","MYSQL_DATABASE=test","MYSQL_USER=xty","MYSQL_PASSWORD=123456"],"Entrypoint":["docker-entrypoint.sh"],"Cmd":["mysqld"],"Volumes":{"/var/lib/mysql":{}},"ArgsEscaped":true,"OnBuild":null},"created":"2024-09-20T01:52:19.366486617Z","history":[{"created":"2023-12-12T19:11:08Z","created_by":"/bin/sh -c #(nop) ADD file:74b33794f8e61e810f09c38da020f9becc9f6987d22fa6f42af6b4226505e6ca in / "},{"created":"2023-12-12T19:11:08Z","created_by":"/bin/sh -c #(nop)  CMD [\"/bin/bash\"]","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tgroupadd --system --gid 999 mysql; \tuseradd --system --uid 999 --gid 999 --home-dir /var/lib/mysql --no-create-home mysql # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"ENV GOSU_VERSION=1.16","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tarch=\"$(uname -m)\"; \tcase \"$arch\" in \t\taarch64) gosuArch='arm64' ;; \t\tx86_64) gosuArch='amd64' ;; \t\t*) echo \u003e\u00262 \"error: unsupported architecture: '$arch'\"; exit 1 ;; \tesac; \tcurl -fL -o /usr/local/bin/gosu.asc \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$gosuArch.asc\"; \tcurl -fL -o /usr/local/bin/gosu \"https://github.com/tianon/gosu/releases/download/$GOSU_VERSION/gosu-$gosuArch\"; \texport GNUPGHOME=\"$(mktemp -d)\"; \tgpg --batch --keyserver hkps://keys.openpgp.org --recv-keys B42F6819007F00F88E364FD4036A9C25BF357DD4; \tgpg --batch --verify /usr/local/bin/gosu.asc /usr/local/bin/gosu; \trm -rf \"$GNUPGHOME\" /usr/local/bin/gosu.asc; \tchmod +x /usr/local/bin/gosu; \tgosu --version; \tgosu nobody true # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tyum install -y --setopt=skip_missing_names_on_install=False oracle-epel-release-el7; \tyum install -y --setopt=skip_missing_names_on_install=False \t\tbzip2 \t\tgzip \t\topenssl \t\txz \t\tzstd \t; \tyum clean all # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tkey='859BE8D7C586F538430B19C2467B942D3A79BD29'; \texport GNUPGHOME=\"$(mktemp -d)\"; \tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \tgpg --batch --export --armor \"$key\" \u003e /etc/pki/rpm-gpg/RPM-GPG-KEY-mysql; \trm -rf \"$GNUPGHOME\" # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"ENV MYSQL_MAJOR=5.7","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"ENV MYSQL_VERSION=5.7.44-1.el7","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eu; \t{ \t\techo '[mysql5.7-server-minimal]'; \t\techo 'name=MySQL 5.7 Server Minimal'; \t\techo 'enabled=1'; \t\techo 'baseurl=https://repo.mysql.com/yum/mysql-5.7-community/docker/el/7/$basearch/'; \t\techo 'gpgcheck=1'; \t\techo 'gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql'; \t\techo 'module_hotfixes=true'; \t} | tee /etc/yum.repos.d/mysql-community-minimal.repo # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tyum install -y --setopt=skip_missing_names_on_install=False \"mysql-community-server-minimal-$MYSQL_VERSION\"; \tyum clean all; \tgrep -F 'socket=/var/lib/mysql/mysql.sock' /etc/my.cnf; \tsed -i 's!^socket=.*!socket=/var/run/mysqld/mysqld.sock!' /etc/my.cnf; \tgrep -F 'socket=/var/run/mysqld/mysqld.sock' /etc/my.cnf; \t{ echo '[client]'; echo 'socket=/var/run/mysqld/mysqld.sock'; } \u003e\u003e /etc/my.cnf; \t\t! grep -F '!includedir' /etc/my.cnf; \t{ echo; echo '!includedir /etc/mysql/conf.d/'; } \u003e\u003e /etc/my.cnf; \tmkdir -p /etc/mysql/conf.d; \t{ echo '!includedir /etc/mysql/mysql.conf.d/'; } \u003e\u003e /etc/my.cnf; \tmkdir -p /etc/mysql/mysql.conf.d; \t\tfind /etc/my.cnf /etc/mysql/ -name '*.cnf' -print0 \t\t| xargs -0 grep -lZE '^(bind-address|log)' \t\t| xargs -rt -0 sed -Ei 's/^(bind-address|log)/#\u0026/'; \t\tmkdir -p /var/lib/mysql /var/run/mysqld; \tchown mysql:mysql /var/lib/mysql /var/run/mysqld; \tchmod 1777 /var/lib/mysql /var/run/mysqld; \t\tmkdir /docker-entrypoint-initdb.d; \t\tmysqld --version; \tmysql --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eu; \t{ \t\techo '[mysql-tools-community]'; \t\techo 'name=MySQL Tools Community'; \t\techo 'baseurl=https://repo.mysql.com/yum/mysql-tools-community/el/7/$basearch/'; \t\techo 'enabled=1'; \t\techo 'gpgcheck=1'; \t\techo 'gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql'; \t\techo 'module_hotfixes=true'; \t} | tee /etc/yum.repos.d/mysql-community-tools.repo # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"ENV MYSQL_SHELL_VERSION=8.0.35-1.el7","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c set -eux; \tyum install -y --setopt=skip_missing_names_on_install=False \"mysql-shell-$MYSQL_SHELL_VERSION\"; \tyum clean all; \t\tmysqlsh --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"VOLUME [/var/lib/mysql]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"COPY docker-entrypoint.sh /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"RUN /bin/sh -c ln -s usr/local/bin/docker-entrypoint.sh /entrypoint.sh # backwards compat # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2023-12-12T19:11:08Z","created_by":"ENTRYPOINT [\"docker-entrypoint.sh\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"EXPOSE map[3306/tcp:{} 33060/tcp:{}]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2023-12-12T19:11:08Z","created_by":"CMD [\"mysqld\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"ENV MYSQL_ROOT_PASSWORD=root","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"ENV MYSQL_DATABASE=test","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"ENV MYSQL_USER=xty","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"ENV MYSQL_PASSWORD=123456","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"COPY ./init.sql /docker-entrypoint-initdb.d/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"EXPOSE map[3307/tcp:{}]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2024-09-20T01:52:19.366486617Z","created_by":"CMD [\"mysqld\"]","comment":"buildkit.dockerfile.v0","empty_layer":true}],"os":"linux","rootfs":{"type":"layers","diff_ids":["sha256:cff044e186247f93aa52554c96d77143cc92f99b2b55914038d0941fddeb6623","sha256:7ff7abf4911b44c1b705de478892bac6d01821c65ebc2993edb87136d51eb670","sha256:8b2952eb02aac23a82803bf3e25d94ea78f3d4674d972cc7324a712ad9d54b6f","sha256:d76a5f910f6ba5bce12b14e396f8386d385d62bbc4c9d82af25ae956c11bb3aa","sha256:8527ccd6bd857b844293f9efe34222229fa76e040d55dd03e019f305f7bd2a74","sha256:4555572a6bb29d49eb9dbd1fb0938788ca7d772f441f8273626f1a12933fcee3","sha256:0d9e9a9ce9e415229fa3c1953ec32c236bfde6a825f4a74a78013586071c02e8","sha256:532b66f4569dfab5f87219c302ea23478e6ad9504863f2a7410c935593e6b526","sha256:337ec6bae2225e56895f25ef88a874b2796e020332d63a35929f40e9e7fa158e","sha256:73cb62467b8f9e06265bc00441cc3d8026d24ca3708d517a3df93ff5a787af77","sha256:441e16cac4fe6b7abab2653886fbab030752e42c42bd508f1fa2f7f8c5df0fcf","sha256:70dbce06f13b89415737eae1bfdb17dd1c5ab46035dfb537d1ea429af8be9950"]}}